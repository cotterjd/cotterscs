(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{201:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),r=n(22),c=n.n(r),i=(n(92),n(44)),s=n(30),u=n(23),d=n(24),l=n(28),f=n(25),h=n(29),m=n(5),p=n(6),b=(n(93),n(207)),v=n(202),g=n(203),C=n(204),y=n(205),k=n(208),j=n(81);n(206);function w(e,t,n){var o="";if(n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),o="; expires=".concat(a.toGMTString())}return"".concat(e,"=").concat(t).concat(o,";domain=cotterjd.github.io;path=/")}function S(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));return 2===t.length&&decodeURIComponent(t.pop().split(";").shift())||""}function O(){var e=Object(m.a)(["\n        width: ",";\n        height: ",";\n        box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.1);\n        background-color: #ffffff;\n        top: 0;\n        left: 0;\n\n        overflow-y: scroll;\n        padding: 30px;\n        display: ",";\n        z-index: 3;\n        position: fixed;\n        ","\n      "]);return O=function(){return e},e}function E(){var e=Object(m.a)(["\n    position: absolute;\n    right: 10px;\n    top: 5px;\n    font-size: 24px;\n    opacity: 0.5;\n\n    :hover {\n      cursor: pointer;\n    }\n  "]);return E=function(){return e},e}console.log;var N=p.a.span(E()),x=function(e){function t(e,n){var o;return Object(u.a)(this,t),(o=Object(l.a)(this,Object(f.a)(t).call(this,e,n))).state={},o}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=p.a.div(O(),e.width||"auto",e.height||"auto",function(e){return e.open?"block":"none"},e.styles);return a.a.createElement(t,{open:e.open},a.a.createElement(N,{onClick:e.close,className:"clickable"},"\u2715"),e.children)}}]),t}(a.a.Component);function M(){var e=Object(m.a)(["\n    width: 100%;\n    padding: 20px;\n    background-color: #74fff8;\n  "]);return M=function(){return e},e}function D(){var e=Object(m.a)(["\n    background-color: red;\n    color: #ffffff;\n    width: 99%;\n    padding: 25px 15px;\n    margin: 5px;\n    border-radius: 10px;\n    text-transform: uppercase;\n  "]);return D=function(){return e},e}function I(){var e=Object(m.a)(["\n    background-color: green;\n    color: #ffffff;\n    width: 99%;\n    padding: 25px 15px;\n    margin: 5px;\n    border-radius: 10px;\n    text-transform: uppercase;\n  "]);return I=function(){return e},e}function R(){var e=Object(m.a)(["\n    background-color: #805716;\n    color: #ffffff;\n    width: 99%;\n    padding: 25px 15px;\n    margin: 5px;\n    border-radius: 10px;\n  "]);return R=function(){return e},e}function T(){var e=Object(m.a)(["\n    background-color: ",";\n    color: ",";\n    width: 99%;\n    padding: 15px;\n  "]);return T=function(){return e},e}console.log;var P=function(e,t){"OTHER"===t&&e.setState({showOtherModal:!0}),e.setState(function(e,n){return{chosenCodes:e.chosenCodes.includes(t)?e.chosenCodes.filter(function(e){return e!==t}):e.chosenCodes.concat(t)}})},B=function(e){var t=e.state,n=t.unitName,o=t.chosenCodes,a=t.otherDesc;n&&o.length&&(o.includes("Went Back")?function(e){return fetch("https://us1.prisma.sh/jordan-cotter-820a2c/cruise/dev",{method:"POST",body:JSON.stringify({query:'\n            {\n              unitCodes(orderBy: createdAt_DESC where: {\n                deviceId: "'.concat(e.state.deviceId,'"\n                unit: "').concat(e.state.unitName,'"\n              }) {\n                id\n                createdAt\n                codes\n              }\n            }\n          ')}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).catch(console.error)}(e).then(function(e){var t;e.errors?console.log(e.errors):(t=b.a(e.data.unitCodes),fetch("https://us1.prisma.sh/jordan-cotter-820a2c/cruise/dev",{method:"POST",body:JSON.stringify({query:'\n            mutation {\n              deleteUnitCode(where: {\n                id: "'.concat(t.id,'"\n              }) {\n                id\n              }\n            }\n          ')}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).catch(console.error))}).then(function(t){return K(e)}):o.includes("OTHER")?e.setState(function(e){return{chosenCodes:o.map(function(e){return"OTHER"===e?"OTHER ".concat(a):e})}},function(){return K(e)}):K(e))},U=p.a.button(T(),function(e){return e.state.chosenCodes.includes(e.code)?"green":"none"},function(e){return e.state.chosenCodes.includes(e.code)?"white":e.code.includes("Completed")?"green":"none"}),A=p.a.button(R()),W=p.a.button(I()),L=p.a.button(D()),J=p.a.button(M()),H=function(e,t){var n="".concat(e.reduce(function(e,t){return"".concat(e,'"').concat(t,'",')},"").slice(0,-1),"\r\n"),o=t.reduce(function(e,t){return"".concat(e,'"').concat(t.join('","'),'"\r\n')},[]);o="string"===typeof o?o.trim():"";var a="".concat(n).concat(o),r=new Blob([a],{type:"text/csv"}),c="data:text/csv;charset=utf-8,".concat(a),i=window.URL||window.webkitURL,s="undefined"===typeof i.createObjectURL?c:i.createObjectURL(r),u=document.createElement("a");u.setAttribute("href",s),u.setAttribute("download","tableDownload.csv"),document.body.appendChild(u),u.click(),document.body.removeChild(u)},q=function(e){return v.a(g.a("createdAt"),e).map(function(e){return[e.unit,e.codes,e.createdAt,e.deviceId]}).reverse()},z=function(e,t){return e.includes(t.codes.split(", ")[0])};function K(e){return fetch("https://us1.prisma.sh/jordan-cotter-820a2c/cruise/dev",{method:"POST",body:JSON.stringify({query:'\n            mutation {\n              createUnitCode(data: {\n                deviceId: "'.concat(e.state.deviceId,'"\n                unit: "').concat(e.state.unitName,'"\n                codes: "').concat(e.state.chosenCodes.join(", "),'"\n                job: "').concat(e.state.jobName,'"\n              }) {\n                id\n              }\n            }\n          ')}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){t&&t.data&&t.data.createUnitCode&&!t.errors?e.setState(function(e){return{unitCodes:[].concat(Object(i.a)(e.unitCodes),[[e.unitName,e.chosenCodes.join(", ")]]),chosenCodes:[],unitName:""}}):e.setState(function(e){return{unitCodes:[].concat(Object(i.a)(e.unitCodes),[[e.unitName,"NOT SAVED. make sure you have a internet connection and try again"]]),chosenCodes:[],unitName:""}})}).catch(console.error)}var Y=function(e){function t(){var e,n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(f.a)(t).call(this))).updateOtherDesc=function(e){n.setState({otherDesc:e.target.value,showOtherModal:!1})},n.closeOtherModal=function(e){n.setState({showOtherModal:!1})},n.state=(e={chosenCodes:[],unitName:"",unitCodes:[],allUnitCodes:[],userName:"",deviceId:S("userName"),jobName:S("job"),showModal:!1,showOtherModal:!1,otherDesc:"",columns:["unit","codes","created date","device ID","job"],unServicedCodes:["TV","Dog","Blocked","Locked From The Inside","No Key","Key Not Work","Skip Per Management","Minor","Denied Entry","see css","OTHER"],servicedWithIssuesCodes:["Missing Chimney Cap","Missing Damper","Broken Damper","Missing Spark Screen","Damaged Spark Screen","Damaged Left Refractory Panel","Damaged Back Refractory Panel","Damaged Right Refractory Panel","Damaged Base Panel","Missing Left Refractory Panel","Missing Back Refractory Panel","Missing Right Refractory Panel","Missing Base Panel","see  css","Went Back"],servicedNoIssuesCodes:["Completed. No Issues."]},Object(s.a)(e,"unServicedCodes",["TV","Dog","Blocked","Locked From The Inside","No Key","Key Not Work","Skip Per Management","Minor","Denied Entry","see css","OTHER"]),Object(s.a)(e,"servicedWithIssuesCodes",["Missing Chimney Cap","Missing Damper","Broken Damper","Missing Spark Screen","Damaged Spark Screen","Damaged Left Refractory Panel","Damaged Back Refractory Panel","Damaged Right Refractory Panel","Damaged Base Panel","Missing Left Refractory Panel","Missing Back Refractory Panel","Missing Right Refractory Panel","Missing Base Panel","see  css","Went Back"]),Object(s.a)(e,"servicedNoIssuesCodes",["Completed. No Issues."]),e),n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state;return a.a.createElement("div",null,!t.deviceId&&a.a.createElement("div",null,a.a.createElement("input",{name:"username",placeholder:"User Name",style:{width:"100%",padding:"20px",boxSizing:"border-box"},value:t.userName,onChange:function(t){return function(e,t){return e.setState({userName:t.target.value})}(e,t)},type:"text"}),a.a.createElement(A,{onClick:function(t){return n=e,document.cookie=w("userName",n.state.userName,365),void n.setState({deviceId:n.state.userName});var n}},"Save User Name")),!t.jobName&&a.a.createElement("div",null,a.a.createElement("input",{name:"jobname",placeholder:"Job Name",style:{width:"100%",padding:"20px",boxSizing:"border-box"},value:t.job,onChange:function(t){return function(e,t){return e.setState({job:t.target.value})}(e,t)},type:"text"}),a.a.createElement(W,{onClick:function(t){return n=e,document.cookie=w("job",n.state.jobName,365),void n.setState({jobName:n.state.job});var n}},"Start Job")),a.a.createElement("input",{name:"unit",placeholder:"Unit",style:{width:"100%",padding:"20px",boxSizing:"border-box"},value:t.unitName,onChange:function(t){return function(e,t){return e.setState({unitName:t.target.value})}(e,t)},type:"text"}),t.servicedWithIssuesCodes.map(function(n,o){return a.a.createElement(U,{state:t,code:n,key:n,onClick:function(t){return P(e,n)}},n)}),a.a.createElement("br",null),t.servicedNoIssuesCodes.map(function(n,o){return a.a.createElement(U,{state:t,code:n,key:n,onClick:function(t){return P(e,n)}},n)}),a.a.createElement("br",null),a.a.createElement("br",null),t.unServicedCodes.map(function(n,o){return a.a.createElement(U,{state:t,code:n,key:n,onClick:function(t){return P(e,n)}},n)}),a.a.createElement(J,{onClick:function(t){return B(e)}},"Add Codes"),a.a.createElement("ul",{id:"report",style:{listStyleType:"none"}},t.unitCodes.map(function(e,t){return a.a.createElement("li",{key:t},e)})),a.a.createElement(L,{onClick:function(t){return n=e,document.cookie=w("job","",365),void n.setState({jobName:"",job:""});var n}},"End Job"),a.a.createElement("button",{style:{padding:"25px",width:"100%",marginBottom:"50px"},onClick:function(t){return n=e,fetch("https://us1.prisma.sh/jordan-cotter-820a2c/cruise/dev",{method:"POST",body:JSON.stringify({query:"\n          query {\n            unitCodes {\n              unit\n              codes\n              createdAt\n              deviceId\n              job\n            }\n          }\n        "}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){var t=e.data.unitCodes.map(function(e){return C.a("createdAt",Object(j.format)(new Date(e.createdAt),"MM/DD/YYYY h:mm"),e)});n.setState({allUnitCodes:t,showModal:!0})}).catch(console.error);var n}},"Download Report"),a.a.createElement(x,{open:t.showModal,close:function(t){return e.setState({showModal:!1})}},a.a.createElement("h4",null,"Which device to you want to download codes from"),Object.keys(y.a(k.a("deviceId"),this.state.allUnitCodes)).map(function(t){return a.a.createElement("div",null,a.a.createElement("button",{key:t,onClick:function(n){return function(e,t){var n=e.state.allUnitCodes.filter(function(n){return n.deviceId===t&&z(e.state.servicedNoIssuesCodes,n)}),o=q(n);H(e.state.columns,o),e.setState({showModal:!1})}(e,t)}},"".concat(t," (Completed. No Issues)")),a.a.createElement("button",{key:t,onClick:function(n){return function(e,t){var n=e.state.allUnitCodes.filter(function(n){return n.deviceId===t&&z(e.state.servicedWithIssuesCodes,n)}),o=q(n);H(e.state.columns,o),e.setState({showModal:!1})}(e,t)}},"".concat(t," (Completed with issues)")),a.a.createElement("button",{key:t,onClick:function(n){return function(e,t){var n=e.state.allUnitCodes.filter(function(n){return n.deviceId===t&&!z(e.state.servicedWithIssuesCodes,n)&&!z(e.state.servicedNoIssuesCodes,n)}),o=q(n);H(e.state.columns,o),e.setState({showModal:!1})}(e,t)}},"".concat(t," (NA)")),a.a.createElement("button",{key:t,onClick:function(n){return function(e,t){var n=e.state.allUnitCodes.filter(function(e){return e.deviceId===t}),o=q(n);H(e.state.columns,o),e.setState({showModal:!1})}(e,t)}},"All"))})),a.a.createElement(x,{open:t.showOtherModal,close:function(t){return e.setState({showOtherModal:!1})}},a.a.createElement("h4",null,"Add description"),a.a.createElement("input",{type:"text",value:this.otherDesc,onBlur:this.updateOtherDesc}),a.a.createElement("button",{onClick:function(t){return e.setState({showOtherModal:!1})}},"Save")))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},86:function(e,t,n){e.exports=n(201)},92:function(e,t,n){},93:function(e,t,n){}},[[86,1,2]]]);
//# sourceMappingURL=main.a81d7339.chunk.js.map