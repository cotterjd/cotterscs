(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{200:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),r=n(22),c=n.n(r),i=(n(91),n(43)),s=n(23),u=n(24),d=n(28),l=n(25),h=n(29),f=n(8),p=n(9),m=(n(92),n(206)),v=n(201),C=n(202),b=n(203),g=n(204),y=n(207),w=n(80);n(205);function O(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));return 2===t.length&&decodeURIComponent(t.pop().split(";").shift())||""}function k(){var e=Object(f.a)(["\n        width: ",";\n        height: ",";\n        box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.1);\n        background-color: #ffffff;\n        top: 0;\n        left: 0;\n\n        overflow-y: scroll;\n        padding: 30px;\n        display: ",";\n        z-index: 3;\n        position: fixed;\n        ","\n      "]);return k=function(){return e},e}function S(){var e=Object(f.a)(["\n    position: absolute;\n    right: 10px;\n    top: 5px;\n    font-size: 24px;\n    opacity: 0.5;\n\n    :hover {\n      cursor: pointer;\n    }\n  "]);return S=function(){return e},e}console.log;var j=p.a.span(S()),E=function(e){function t(e,n){var o;return Object(s.a)(this,t),(o=Object(d.a)(this,Object(l.a)(t).call(this,e,n))).state={},o}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=p.a.div(k(),e.width||"auto",e.height||"auto",function(e){return e.open?"block":"none"},e.styles);return a.a.createElement(t,{open:e.open},a.a.createElement(j,{onClick:e.close,className:"clickable"},"\u2715"),e.children)}}]),t}(a.a.Component);function x(){var e=Object(f.a)(["\n    width: 100%;\n    padding: 20px;\n    background-color: #74fff8;\n  "]);return x=function(){return e},e}function N(){var e=Object(f.a)(["\n    background-color: #805716;\n    color: #ffffff;\n    width: 99%;\n    padding: 25px 15px;\n    margin: 5px;\n    border-radius: 10px;\n  "]);return N=function(){return e},e}function D(){var e=Object(f.a)(["\n    background-color: ",";\n    color: ",";\n    width: 99%;\n    padding: 15px;\n  "]);return D=function(){return e},e}console.log;var M=function(e,t){"OTHER"===t&&e.setState({showOtherModal:!0}),e.setState(function(e,n){return{chosenCodes:e.chosenCodes.includes(t)?e.chosenCodes.filter(function(e){return e!==t}):e.chosenCodes.concat(t)}})},T=function(e){document.cookie=function(e,t,n){var o="";if(n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),o="; expires=".concat(a.toGMTString())}return"".concat(e,"=").concat(t).concat(o,";domain=cotterjd.github.io;path=/")}("userName",e.state.userName,365),e.setState({deviceId:e.state.userName})},R=function(e){var t=e.state,n=t.unitName,o=t.chosenCodes;t.otherDesc;n&&o.length&&(o.includes("Went Back")?function(e){return fetch("https://us1.prisma.sh/jordan-cotter-820a2c/cruise/dev",{method:"POST",body:JSON.stringify({query:'\n            {\n              unitCodes(orderBy: createdAt_DESC where: {\n                deviceId: "'.concat(e.state.deviceId,'"\n                unit: "').concat(e.state.unitName,'"\n              }) {\n                id\n                createdAt\n                codes\n              }\n            }\n          ')}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).catch(console.error)}(e).then(function(e){var t;e.errors?console.log(e.errors):(t=m.a(e.data.unitCodes),fetch("https://us1.prisma.sh/jordan-cotter-820a2c/cruise/dev",{method:"POST",body:JSON.stringify({query:'\n            mutation {\n              deleteUnitCode(where: {\n                id: "'.concat(t.id,'"\n              }) {\n                id\n              }\n            }\n          ')}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).catch(console.error))}).then(function(t){return L(e)}):o.includes("OTHER")?e.setState(function(e){return{chosenCodes:e.chosenCodes.map(function(t){return"OTHER"===t?"OTHER ".concat(e.otherDesc):t})}},function(){return L(e)}):L(e))},I=p.a.button(D(),function(e){return e.state.chosenCodes.includes(e.code)?"green":"none"},function(e){return e.state.chosenCodes.includes(e.code)?"white":e.code.includes("Completed")?"green":"none"}),U=p.a.button(N()),B=p.a.button(x()),A=function(e,t){var n="".concat(e.reduce(function(e,t){return"".concat(e,'"').concat(t,'",')},"").slice(0,-1),"\r\n"),o=t.reduce(function(e,t){return"".concat(e,'"').concat(t.join('","'),'"\r\n')},[]);o="string"===typeof o?o.trim():"";var a="".concat(n).concat(o),r=new Blob([a],{type:"text/csv"}),c="data:text/csv;charset=utf-8,".concat(a),i=window.URL||window.webkitURL,s="undefined"===typeof i.createObjectURL?c:i.createObjectURL(r),u=document.createElement("a");u.setAttribute("href",s),u.setAttribute("download","tableDownload.csv"),document.body.appendChild(u),u.click(),document.body.removeChild(u)},P=function(e){return v.a(C.a("createdAt"),e).map(function(e){return[e.unit,e.codes,e.createdAt,e.deviceId]}).reverse()};function L(e){return fetch("https://us1.prisma.sh/jordan-cotter-820a2c/cruise/dev",{method:"POST",body:JSON.stringify({query:'\n            mutation {\n              createUnitCode(data: {\n                deviceId: "'.concat(e.state.deviceId,'"\n                unit: "').concat(e.state.unitName,'"\n                codes: "').concat(e.state.chosenCodes.join(", "),'"\n              }) {\n                id\n              }\n            }\n          ')}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){t&&t.data&&t.data.createUnitCode&&!t.errors?e.setState(function(e){return{unitCodes:[].concat(Object(i.a)(e.unitCodes),[[e.unitName,e.chosenCodes.join(", ")]]),chosenCodes:[],unitName:""}}):e.setState(function(e){return{unitCodes:[].concat(Object(i.a)(e.unitCodes),[[e.unitName,"NOT SAVED. make sure you have a internet connection and try again"]]),chosenCodes:[],unitName:""}})}).catch(console.error)}var J=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(d.a)(this,Object(l.a)(t).call(this))).updateOtherDesc=function(t){e.setState({otherDesc:t.target.value,showOtherModal:!1})},e.closeOtherModal=function(t){e.setState({showOtherModal:!1})},e.state={unServicedCodes:["TV","Dog","Blocked","Locked From The Inside","No Key","Key Not Work","Skip Per Management","Minor","Denied Entry","see css","OTHER"],servicedCodes:["Missing Chimney Cap","Missing Damper","Broken Damper","Missing Spark Screen","Damaged Spark Screen","Damaged Left Refractory Panel","Damaged Back Refractory Panel","Damaged Right Refractory Panel","Damaged Base Panel","Missing Left Refractory Panel","Missing Back Refractory Panel","Missing Right Refractory Panel","Missing Base Panel","see  css","Went Back","Completed. No Issues."],chosenCodes:[],unitName:"",unitCodes:[],allUnitCodes:[],userName:"",deviceId:O("userName"),showModal:!1,showOtherModal:!1,otherDesc:""},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state;return a.a.createElement("div",null,!t.deviceId&&a.a.createElement("div",null,a.a.createElement("input",{name:"username",placeholder:"User Name",style:{width:"100%",padding:"20px",boxSizing:"border-box"},value:t.userName,onChange:function(t){return function(e,t){return e.setState({userName:t.target.value})}(e,t)},type:"text"}),a.a.createElement(U,{onClick:function(t){return T(e)}},"Save User Name")),a.a.createElement("input",{name:"unit",placeholder:"Unit",style:{width:"100%",padding:"20px",boxSizing:"border-box"},value:t.unitName,onChange:function(t){return function(e,t){return e.setState({unitName:t.target.value})}(e,t)},type:"text"}),t.servicedCodes.map(function(n,o){return a.a.createElement(I,{state:t,code:n,key:n,onClick:function(t){return M(e,n)}},n)}),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("br",null),t.unServicedCodes.map(function(n,o){return a.a.createElement(I,{state:t,code:n,key:n,onClick:function(t){return M(e,n)}},n)}),a.a.createElement(B,{onClick:function(t){return R(e)}},"Add Codes"),a.a.createElement("ul",{id:"report",style:{listStyleType:"none"}},t.unitCodes.map(function(e,t){return a.a.createElement("li",{key:t},e)})),a.a.createElement("button",{style:{padding:"25px",width:"100%",marginBottom:"50px"},onClick:function(t){return n=e,fetch("https://us1.prisma.sh/jordan-cotter-820a2c/cruise/dev",{method:"POST",body:JSON.stringify({query:"\n          query {\n            unitCodes {\n              unit\n              codes\n              createdAt\n              deviceId\n            }\n          }\n        "}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){var t=e.data.unitCodes.map(function(e){return b.a("createdAt",Object(w.format)(new Date(e.createdAt),"MM/DD/YYYY h:mm"),e)});n.setState({allUnitCodes:t,showModal:!0})}).catch(console.error);var n}},"Download Report"),a.a.createElement(E,{open:t.showModal,close:function(t){return e.setState({showModal:!1})}},a.a.createElement("h4",null,"Which device to you want to download codes from"),Object.keys(g.a(y.a("deviceId"),this.state.allUnitCodes)).map(function(t){return a.a.createElement("div",null,a.a.createElement("button",{key:t,onClick:function(n){return function(e,t){var n=e.state.allUnitCodes.filter(function(n){return n.deviceId===t&&e.state.servicedCodes.includes(n.codes.split(", ")[0])}),o=P(n);A(["unit","codes","created date","device ID"],o),e.setState({showModal:!1})}(e,t)}},t),a.a.createElement("button",{key:t,onClick:function(n){return function(e,t){var n=e.state.allUnitCodes.filter(function(n){return n.deviceId===t&&!e.state.servicedCodes.includes(n.codes.split(", ")[0])}),o=P(n);A(["unit","codes","created date","device ID"],o),e.setState({showModal:!1})}(e,t)}},"".concat(t," (NA)")))})),a.a.createElement(E,{open:t.showOtherModal,close:function(t){return e.setState({showOtherModal:!1})}},a.a.createElement("h4",null,"Add description"),a.a.createElement("input",{type:"text",value:this.otherDesc,onBlur:this.updateOtherDesc}),a.a.createElement("button",{onClick:function(t){return e.setState({showOtherModal:!1})}},"Save")))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},85:function(e,t,n){e.exports=n(200)},91:function(e,t,n){},92:function(e,t,n){}},[[85,1,2]]]);
//# sourceMappingURL=main.26e36094.chunk.js.map