(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{199:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),a=n(81),c=n.n(a),i=(n(93),n(23)),s=n(24),u=n(28),d=n(25),l=n(29),f=n(4),h=n(43),m=(n(94),n(203)),p=n(204),b=n(205),v=n(208),C=n(209),j=n(85),y=n(206),g=function(e){return fetch("https://us1.prisma.sh/jordan-cotter-820a2c/cruise/dev",{method:"POST",body:JSON.stringify({query:'\n          mutation {\n            deleteUnitCode(where: {\n              id: "'.concat(e,'"\n            }) {\n              id\n            }\n          }\n        ')}),headers:{"Content-Type":"application/json"}})},O=function(){return fetch("https://us1.prisma.sh/jordan-cotter-820a2c/cruise/dev",{method:"POST",body:JSON.stringify({query:"\n          query {\n            unitCodes {\n              unit\n              codes\n              createdAt\n              deviceId\n              job\n            }\n          }\n        "}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()})},k=function(e,t){return fetch("https://us1.prisma.sh/jordan-cotter-820a2c/cruise/dev",{method:"POST",body:JSON.stringify({query:'\n          {\n            unitCodes(orderBy: createdAt_DESC where: {\n              job: "'.concat(e,'"\n              unit: "').concat(t,'"\n            }) {\n              id\n              createdAt\n              codes\n              job\n            }\n          }\n        ')}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).catch(console.error)},w=function(e,t,n,o){return fetch("https://us1.prisma.sh/jordan-cotter-820a2c/cruise/dev",{method:"POST",body:JSON.stringify({query:'\n          mutation {\n            createUnitCode(data: {\n              deviceId: "'.concat(e,'"\n              unit: "').concat(t,'"\n              codes: "').concat(n.join(", "),'"\n              job: "').concat(o,'"\n            }) {\n              id job unit\n            }\n          }\n        ')}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()})},S=n(82),N=n(207);function E(e){var t=e.location.origin;return t.includes("localhost")?"localhost":Object(N.a)(function(e){return e.split(".")},function(e){return e.slice(-2)},function(e){return e.join(".")},function(e){return".".concat(e)})(t)}function x(e,t,n){var o="";if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),o="; expires=".concat(r.toGMTString())}return"".concat(e,"=").concat(t).concat(o,";domain=").concat(E(window),";path=/")}function D(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));return 2===t.length&&decodeURIComponent(t.pop().split(";").shift())||""}var I=n(6),M=n(7);function B(){var e=Object(I.a)(["\n        width: ",";\n        height: ",";\n        box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.1);\n        background-color: #ffffff;\n        top: 0;\n        left: 0;\n\n        overflow-y: auto;\n        padding: 30px;\n        display: ",";\n        z-index: 3;\n        position: fixed;\n        ","\n      "]);return B=function(){return e},e}function U(){var e=Object(I.a)(["\n    position: absolute;\n    right: 10px;\n    top: 5px;\n    font-size: 24px;\n    opacity: 0.5;\n\n    :hover {\n      cursor: pointer;\n    }\n  "]);return U=function(){return e},e}console.log;var R=M.a.span(U()),T=function(e){function t(e,n){var o;return Object(i.a)(this,t),(o=Object(u.a)(this,Object(d.a)(t).call(this,e,n))).state={},o}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=M.a.div(B(),e.width||"auto",e.height||"auto",function(e){return e.open?"block":"none"},e.styles);return r.a.createElement(t,{open:e.open},r.a.createElement(R,{onClick:e.close,className:"clickable"},"\u2715"),e.children)}}]),t}(r.a.Component),P=n(201),A=n(202),W=function(e,t){var n="".concat(e.reduce(function(e,t){return"".concat(e,'"').concat(t,'",')},"").slice(0,-1),"\r\n"),o=t.reduce(function(e,t){return"".concat(e,'"').concat(t.join('","'),'"\r\n')},[]);o="string"===typeof o?o.trim():"";var r="".concat(n).concat(o),a=new Blob([r],{type:"text/csv"}),c="data:text/csv;charset=utf-8,".concat(r),i=window.URL||window.webkitURL,s="undefined"===typeof i.createObjectURL?c:i.createObjectURL(a),u=document.createElement("a");u.setAttribute("href",s),u.setAttribute("download","tableDownload.csv"),document.body.appendChild(u),u.click(),document.body.removeChild(u)},J={sortedJobNames:function(e){var t=P.a(A.a(function(e){return new Date(e.createdAt)}),e),n=y.a(v.a("job"),t);return Object.keys(n)}};function L(){var e=Object(I.a)(["\n    width: 100%;\n    padding: 20px;\n    background-color: #74fff8;\n  "]);return L=function(){return e},e}function q(){var e=Object(I.a)(["\n    background-color: red;\n    color: #ffffff;\n    width: 99%;\n    padding: 25px 15px;\n    margin: 5px;\n    border-radius: 10px;\n    text-transform: uppercase;\n  "]);return q=function(){return e},e}function z(){var e=Object(I.a)(["\n    background-color: green;\n    color: #ffffff;\n    width: 99%;\n    padding: 25px 15px;\n    margin: 5px;\n    border-radius: 10px;\n    text-transform: uppercase;\n  "]);return z=function(){return e},e}function H(){var e=Object(I.a)(["\n    background-color: #805716;\n    color: #ffffff;\n    width: 99%;\n    padding: 25px 15px;\n    margin: 5px;\n    border-radius: 10px;\n  "]);return H=function(){return e},e}function Y(){var e=Object(I.a)(["\n    background-color: ",";\n    color: ",";\n    width: 99%;\n    padding: 15px;\n  "]);return Y=function(){return e},e}var K=M.a.button(Y(),function(e){return e.state.chosenCodes.includes(e.code)?"green":"none"},function(e){return e.state.chosenCodes.includes(e.code)?"white":e.code.includes("Completed")?"green":"none"}),V=M.a.button(H()),F=M.a.button(z()),G=M.a.button(q()),$=M.a.button(L()),_=(console.log,function(e,t){"OTHER"!==t&&"Broken Damper - Other"!==t||e.setState({showOtherModal:!0}),e.setState(function(e,n){return{chosenCodes:e.chosenCodes.includes(t)?e.chosenCodes.filter(function(e){return e!==t}):e.chosenCodes.concat(t)}})}),Q=function(e){return m.a(p.a("createdAt"),e).map(function(e){return[e.unit,e.codes,e.createdAt,e.deviceId,e.job]}).reverse()},X=function(e){O().then(function(t){var n=t.data.unitCodes.map(function(e){return b.a("createdAt",Object(S.format)(new Date(e.createdAt),"MM/DD/YYYY h:mm"),e)});e.setState({allUnitCodes:n})}).catch(console.error)},Z=function(e,t){return e.includes(t.codes.split(", ")[0])},ee=function(e){return k(e.state.jobName,e.state.unitName)},te=function(e){return g(e.id).then(function(e){return e.json()}).catch(console.error)},ne=function(e){var t=e.state,n=t.deviceId,o=t.unitName,r=t.chosenCodes,a=t.jobName;return n?a?void w(n,o,r,a).then(function(t){!function(e){return e&&e.data&&e.data.createUnitCode&&!e.errors}(t)?e.setState(function(e){return{unitCodes:[].concat(Object(h.a)(e.unitCodes),[[e.unitName,"NOT SAVED. make sure you have a internet connection and try again"]]),chosenCodes:[],unitName:""}}):e.setState(function(e){return function(e,t){var n=e.data.createUnitCode;return{unitCodes:[].concat(Object(h.a)(t.unitCodes),[[n.id,t.unitName,t.chosenCodes].join(", ")]),chosenCodes:[],unitName:""}}(t,e)})}).catch(console.error):alert("Please add a job."):alert("Please add your user.")},oe=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).updateOtherDesc=function(t){e.setState({otherDesc:t.target.value,showOtherModal:!1})},e.closeOtherModal=function(t){e.setState({showOtherModal:!1})},e.addCodes=function(t){var n=e.state,o=n.unitName,r=n.chosenCodes,a=n.otherDesc;o&&r.length&&(r.includes("Went Back")?ee(Object(f.a)(Object(f.a)(e))).then(function(e){e.errors?console.log(e.errors):te(C.a(e.data.unitCodes))}).then(function(t){return ne(Object(f.a)(Object(f.a)(e)))}):r.includes("OTHER")?e.setState(function(e){return{chosenCodes:r.map(function(e){return"OTHER"===e?"OTHER ".concat(a):e})}},function(){return ne(Object(f.a)(Object(f.a)(e)))}):r.includes("Broken Damper - Other")?e.setState(function(e){return{chosenCodes:r.map(function(e){return"Broken Damper - Other"===e?"Broken Damper - Other ".concat(a):e})}},function(){return ne(Object(f.a)(Object(f.a)(e)))}):ne(Object(f.a)(Object(f.a)(e))))},e.state={chosenCodes:[],unitName:"",unitCodes:[],allUnitCodes:[],userName:"",deviceId:D("userName"),jobName:D("job"),showModal:!1,showOtherModal:!1,otherDesc:"",columns:["unit","codes","created date","device ID","job"],unServicedCodes:["TV","Dog","Blocked","Locked From The Inside","No Key","Key Not Work","Skip Per Management","Minor","Denied Entry","see css","OTHER"],servicedWithIssuesCodes:["Missing Chimney Cap","Missing Damper","Broken Damper - Other","Broken Damper - stays open","Broken Damper - closed/won't open","Broken Damper - Not Connected","Missing Spark Screen","Damaged Spark Screen","Damaged Left Refractory Panel","Damaged Back Refractory Panel","Damaged Right Refractory Panel","Damaged Base Panel","Missing Left Refractory Panel","Missing Back Refractory Panel","Missing Right Refractory Panel","Missing Base Panel","see  css","Went Back"],servicedNoIssuesCodes:["Completed. No Issues."]},X(Object(f.a)(Object(f.a)(e))),e}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state;return r.a.createElement("div",null,!t.deviceId&&r.a.createElement("div",null,r.a.createElement("input",{name:"username",placeholder:"User Name",style:{width:"100%",padding:"20px",boxSizing:"border-box"},value:t.userName,onChange:function(t){return function(e,t){return e.setState({userName:t.target.value})}(e,t)},type:"text"}),r.a.createElement(V,{onClick:function(t){return n=e,document.cookie=x("userName",n.state.userName,365),void n.setState({deviceId:n.state.userName});var n}},"Save User Name")),!t.jobName&&r.a.createElement("div",null,r.a.createElement("input",{name:"jobname",placeholder:"Property Name",style:{width:"100%",padding:"20px",boxSizing:"border-box"},value:t.job,onChange:function(t){return function(e,t){return e.setState({job:t.target.value})}(e,t)},type:"text"}),r.a.createElement(F,{onClick:function(t){return(n=e).state.job||alert("Property name required"),document.cookie=x("job",n.state.job,365),void n.setState({jobName:n.state.job});var n}},"Start new property")),r.a.createElement("input",{name:"unit",placeholder:"Unit",style:{width:"100%",padding:"20px",boxSizing:"border-box"},value:t.unitName,onChange:function(t){return function(e,t){return e.setState({unitName:t.target.value})}(e,t)},type:"text"}),t.servicedWithIssuesCodes.map(function(n,o){return r.a.createElement(K,{state:t,code:n,key:n,onClick:function(t){return _(e,n)}},n)}),r.a.createElement("br",null),t.servicedNoIssuesCodes.map(function(n,o){return r.a.createElement(K,{state:t,code:n,key:n,onClick:function(t){return _(e,n)}},n)}),r.a.createElement("br",null),r.a.createElement("br",null),t.unServicedCodes.map(function(n,o){return r.a.createElement(K,{state:t,code:n,key:n,onClick:function(t){return _(e,n)}},n)}),r.a.createElement($,{onClick:this.addCodes},"Add Codes"),r.a.createElement("ul",{id:"report",style:{listStyleType:"none"}},t.unitCodes.map(function(t,n){return r.a.createElement("li",{key:n},t,r.a.createElement("button",{onClick:function(n){return function(e,t,n){var o=t.split(", "),r=C.a(o),a=C.a(j.a(o));g(r).then(function(e){return e.json()}).then(function(t){e.setState({unitName:a})}).catch(console.error)}(e,t)}},"Redo"))})),!!this.state.jobName&&r.a.createElement(G,{onClick:function(t){return n=e,document.cookie=x("job","",365),void n.setState({jobName:"",job:""});var n}},"End Property"),r.a.createElement("h4",null,"Reports By User/type"),Object.keys(y.a(v.a("deviceId"),this.state.allUnitCodes)).map(function(t,n){return r.a.createElement("div",{key:n},r.a.createElement("button",{onClick:function(n){return function(e,t){var n=e.state.allUnitCodes.filter(function(n){return n.deviceId===t&&Z(e.state.servicedNoIssuesCodes,n)}),o=Q(n);W(e.state.columns,o),e.setState({showModal:!1})}(e,t)}},"".concat(t," (Completed. No Issues)")),r.a.createElement("button",{onClick:function(n){return function(e,t){var n=e.state.allUnitCodes.filter(function(n){return n.deviceId===t&&(Z(e.state.servicedWithIssuesCodes,n)||n.codes.split(", ").some(function(e){return e.includes("Broken Damper - Other")}))}),o=Q(n);W(e.state.columns,o),e.setState({showModal:!1})}(e,t)}},"".concat(t," (Completed with issues)")),r.a.createElement("button",{onClick:function(n){return function(e,t){var n=e.state.allUnitCodes.filter(function(n){return n.deviceId===t&&!Z(e.state.servicedWithIssuesCodes,n)&&!Z(e.state.servicedNoIssuesCodes,n)}),o=Q(n);W(e.state.columns,o),e.setState({showModal:!1})}(e,t)}},"".concat(t," (NA)")),r.a.createElement("button",{onClick:function(n){return function(e,t){var n=e.state.allUnitCodes.filter(function(e){return e.deviceId===t}),o=Q(n);W(e.state.columns,o),e.setState({showModal:!1})}(e,t)}},"All"))}),r.a.createElement("h4",null,"Property Reports"),J.sortedJobNames(this.state.allUnitCodes).map(function(t){return r.a.createElement("button",{key:t,onClick:function(n){return function(e,t){var n=e.state.allUnitCodes.filter(function(e){return e.job===t}),o=m.a(v.a("codes"),n),r=Q(o);W(e.state.columns,r)}(e,t)}},t)}),r.a.createElement(T,{open:t.showOtherModal,close:function(t){return e.setState({showOtherModal:!1})}},r.a.createElement("h4",null,"Add description"),r.a.createElement("input",{type:"text",value:this.otherDesc,onBlur:this.updateOtherDesc}),r.a.createElement("button",{onClick:function(t){return e.setState({showOtherModal:!1})}},"Save")))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},88:function(e,t,n){e.exports=n(199)},93:function(e,t,n){},94:function(e,t,n){}},[[88,1,2]]]);
//# sourceMappingURL=main.aefef470.chunk.js.map